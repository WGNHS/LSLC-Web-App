<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
   <HEAD>
      <TITLE>LSLC Notebooks</TITLE>
       <meta charset="UTF-8">

 
        <!--Google font-->
            <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
       
        <!-- Async from CDN -->    
            <script src="https://unpkg.com/async@2.4.0/dist/async.min.js"></script>
        <!-- docs: http://caolan.github.io/async/docs.html -->
       
       <!-- Load Leaflet from CDN-->
           <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
           <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet-src.js"></script>
       
       <!-- Load Esri Leaflet from CDN -->
            <script src="https://unpkg.com/esri-leaflet@2.0.7"></script>
 
       <!-- JQuery  -->
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
       
       <!-- JQuery UI  -->
            <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.0/themes/smoothness/jquery-ui.css">
            <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.0/jquery-ui.min.js"></script>
    
       
       <!-- local stylesheets -->
           <LINK href="generalStyle.css" rel='stylesheet'/>
           <LINK href="recordStyle.css" rel='stylesheet'/> 
           <LINK href="modalStyle.css" rel='stylesheet'/>

       
      <!-- Enable media queries for old IE -->
      <!--[if lt IE 9]>
        <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
      <![endif]-->
       
</HEAD>
<BODY>
  
   
   <div id="wrapper">
        
       <div id="header"></div>
       
       <h2>Thin Section Gallery</h2> 
       <span>Mouse-over to view cross-polarized images</span>
       
     <!--  <div class='reportDivision'><div id="fieldNotebooksList"></div></div> -->
       <div id="thinGallery"></div>
   
       
       <div id="footer"></div>
   </div><!--end wrapper div-->
   
   <!-- header js and css to highlight the corresponding nav button: must go after the wrapper div and header div -->
   <script src="header.js"></script>
   <script>
           //indicate the current page in the nav bar. 
          // $("#navHome").css("background-color", "#848484");
   </script>
    
    <!-- javascript links -->
    <script src="mapServiceUrls.js"></script>
    
    <!-- javascript for building the thin section gallery -->
    <script>
        
       
        //global variables: 
        var globalThinSectionsArray = []; 
        
    
       function retrieveThinSectionImages(callback){
           var thinImagesQuery = L.esri.query({url: thinSectionsTableURL});
           thinImagesQuery.fields(["*"]); 
           
           thinImagesQuery.run(function(err, featureCollection, response){
               console.log('response', response);
               console.log('feature coll', featureCollection);
               
               thinSectionsManager.add(response.features);
               
               console.log("global array: ", globalThinSectionsArray);
               
//               for (i in response.features){
//                   
//                   console.log('thin number', response.features[i].attributes);
//                   
//                   
//               }
               callback();
               
           });
           

       }
        
        function consoleAfter(callback) {
            console.log("after query? ");
            callback();
        }

        
        var thinSectionsManager = (function(){
            
            var add = function(array){
                
                globalThinSectionsArray = globalThinSectionsArray.concat(array);
                
            }
            
            var sort = function(attr, ascending){
                //attr 
                var direction; 
                
                if (ascending){
                    direction = "ascending";
                } else {
                     direction = "descending";
                }
                
                console.log("sort by "+attr+" in "+direction+" order."); 
            }
            
            return {
                "add": add, 
                "sort": sort,
            }
            
        })();   
           
        async.series([retrieveThinSectionImages, consoleAfter], function(){
            console.log("all done");
        });
        
    </script><!-- end javascript for building the notebook list -->
   
   
</BODY> 
</HTML>